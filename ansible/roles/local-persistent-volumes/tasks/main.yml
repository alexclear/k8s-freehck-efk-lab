- name: create /var/lib/k8s/{{ storage_class_name }}
  file: dest=/var/lib/k8s/{{ storage_class_name }} state=directory

- name: create /var/lib/k8s/{{ storage_class_name }}volumes
  file: dest=/var/lib/k8s/{{ storage_class_name }}/{{ item }} state=directory
  with_items: "{{ k8s_local_storage_pv_names }}"

- name: create /mnt/disks
  file: dest=/mnt/disks state=directory

- name: create /mnt/disks volumes
  file: dest=/mnt/disks/{{ item }} state=directory
  with_items: "{{ k8s_local_storage_pv_names }}"

- name: create a bind mount
  mount: path=/mnt/disks/{{ item }} src=/var/lib/k8s/{{ storage_class_name }}/{{ item }} state=mounted fstype=none opts="rw,bind"
  with_items: "{{ k8s_local_storage_pv_names }}"
